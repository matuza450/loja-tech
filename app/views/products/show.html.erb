<p class="muted"><%= notice %></p>

<<<<<<< HEAD
<<<<<<< HEAD
<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      <div class="product-images">
        <% if @product.images.attached? %>
          <div class="main-image-container mb-3">
            <%= image_tag @product.images.first.variant(resize_to_limit: [600, 400]), class: "main-image", id: "main-product-image" %>
          </div>
          <div class="product-thumbnails d-flex gap-2">
            <% @product.images.each_with_index do |image, index| %>
              <%= image_tag image.variant(resize_to_limit: [100, 100]), 
                          class: "product-thumbnail #{index == 0 ? 'active' : ''}", 
                          data: { 
                            action: "click->product#switchImage",
                            image_url: url_for(image.variant(resize_to_limit: [600, 400]))
                          } %>
            <% end %>
          </div>
        <% else %>
          <%= image_tag "placeholder-product.svg", class: "main-image", alt: "placeholder" %>
        <% end %>
      </div>
    </div>
    
    <div class="col-md-6">
      <h1 class="mb-3"><%= @product.name %></h1>
      <p class="lead mb-4"><%= @product.description %></p>
      
      <div class="mb-4">
        <h3 class="price">R$ <%= number_with_precision(@product.price, precision: 2, delimiter: ",") %></h3>
        <p class="text-muted">Estoque: <%= @product.stock %></p>
      </div>
=======
<article class="product-show">
  <div class="product-details">
    <h1><%= @product.name %></h1>
    <p class="muted"><%= @product.description %></p>
    <p style="margin-top:1rem;"><span class="price">R$ <%= number_with_precision(@product.price, precision: 2, delimiter: ",") %></span></p>
    <p class="muted">Estoque: <%= @product.stock %></p>
>>>>>>> parent of df2f121 (UPDATE)

      <div class="mb-3 d-flex align-items-center gap-3">
        <!-- Average rating -->
        <div>
          <strong>Nota:</strong>
          <span><%= @product.average_rating %> / 5</span>
        </div>

        <!-- Like button -->
        <div>
          <% if logged_in? %>
            <% user_like = @product.likes.find_by(user: current_user) %>
            <% if user_like %>
              <%= button_to product_like_path(@product, user_like), method: :delete, class: "btn btn-outline-danger btn-sm" do %>
                <i class="fas fa-heart"></i> <%= @product.likes.count %>
              <% end %>
            <% else %>
              <%= button_to product_likes_path(@product), method: :post, class: "btn btn-outline-primary btn-sm" do %>
                <i class="far fa-heart"></i> <%= @product.likes.count %>
              <% end %>
            <% end %>
          <% else %>
            <%= link_to login_path, class: "btn btn-outline-secondary btn-sm" do %>
              <i class="far fa-heart"></i> <%= @product.likes.count %>
            <% end %>
          <% end %>
        </div>

        <!-- Buy button (placeholder) -->
        <div>
          <%= link_to '#', class: "btn btn-success btn-sm" do %>
            <i class="fas fa-credit-card me-1"></i> Comprar
          <% end %>
        </div>
      </div>

      <% if logged_in? %>
        <%= button_to add_item_cart_path(product_id: @product), 
                    class: "btn btn-primary btn-lg mb-4",
                    data: { turbo: true } do %>
          <i class="fas fa-shopping-cart me-2"></i> Adicionar ao Carrinho
        <% end %>
=======
<article class="product-show">
  <div style="margin-bottom:1rem;">
    <% if @product.image.attached? %>
      <% if @product.image.variable? %>
        <%= image_tag url_for(@product.image.variant(resize_to_limit: [900, 600])), alt: @product.name, style: "width:100%; max-width:900px; border-radius:10px;" %>
>>>>>>> parent of aaaaa4e (UPDATE)
      <% else %>
        <%= image_tag url_for(@product.image), alt: @product.name, style: "width:100%; max-width:900px; border-radius:10px;" %>
      <% end %>
    <% else %>
      <%= image_tag "placeholder-product.svg", alt: "placeholder", style: "width:100%; max-width:900px; border-radius:10px;" %>
    <% end %>
  </div>
  <div class="product-details">
    <h1><%= @product.name %></h1>
    <p class="muted"><%= @product.description %></p>
    <p style="margin-top:1rem;"><span class="price">R$ <%= number_with_precision(@product.price, precision: 2, delimiter: ",") %></span></p>
    <p class="muted">Estoque: <%= @product.stock %></p>

    <div style="margin-top:1.25rem; display:flex; gap:.5rem; align-items:center;">
      <%= link_to "Editar", edit_product_path(@product), class: "btn btn-ghost" %>
      <%= link_to "Voltar", products_path, class: "btn" %>
      <%= button_to "Excluir", @product, method: :delete, data: { confirm: "Tem certeza?" }, class: "btn btn-ghost" %>
    </div>
  </div>
<<<<<<< HEAD
</div>

<div class="container mt-4">
  <div class="row">
    <div class="col-md-8">
      <%= render 'products/reviews', product: @product %>
      <%= render 'products/comments', product: @product %>
    </div>
  </div>
</div>
=======
</article>
>>>>>>> parent of aaaaa4e (UPDATE)
